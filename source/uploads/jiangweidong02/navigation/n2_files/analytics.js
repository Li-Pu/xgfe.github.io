!function(){"use strict";var u=!0,n="_MeiTuanALogObject",d=1,r="dianping_nova",h="waimai",m="group",c="demo",g="4.13.17",_="lxcuid",y="uuid",b="msid",w="cityid",A="utm",x="uid",S="userid",k="dpid",O="appnm",s="union_id",l="web_env",q="wxmp_env",v="pd_data",I=/^(([^? \r\n]*)\?)?([^?# \r\n]+)(#\S+)?$/,D=setTimeout,f=clearTimeout,p=1,a=2,j=3,E=4,e=5,i=6,o=20,C=7;function M(t){var n=t;return t&&t.code&&(n=t.code),n===p?"E_TIME_OUT":n===a?"E_NO_JSBRIDGE":n===j?"E_KNB_FAIL":n===E?"E_KNB_CB_FAIL":n===e?"E_KNB_NOT_EXIST":n===o?"ERR_PARAMS":n===i?"E_KNB_METHOD_NOT_SUPPORT":"unknown error: "+n}var N=200,T=100,F=500,R=600,P=-1,L="PV",B="PD",V="MC",J="SC",U="MV",Q="MVL",K="ME",W="BO",X="BP",$="event_type",z="val_act",H="val_cid",Z="index",G="element_id",Y="pageView",tt="systemCheck",nt="moduleClick",et="order",rt="order_id",it=1e3,ot=2,at=0,ut=-1,ct=0,st=1,ft=10080,dt=1576800,lt=30,vt="_lx_utm",pt="_lxsdk",ht="_lxsdk_cuid",mt="_lxsdk_dpid",gt="_lxsdk_s",_t="latlng",yt="_lxsdk_rr",bt="_lxsdk_rc",wt="msid",xt="ms",St="category",kt="c",Ot="login_type",qt="lt",It="locate_city_id",jt="lci",At="sdk_ver",Dt="sv",Et="lxcuid",Ct="lxid",Mt="val_lab",Nt="val_bid",Tt="val_val",Ft="sf",Rt="__$lx_beacon_",Pt={category:u,union_id:u,lxcuid:u,app:u,sdk_ver:u,appnm:u,ch:u,lch:u,ct:u,did:u,dm:u,ua:u,msid:u,uuid:u,lat:u,log:u,net:u,os:u,idfa:u,pushid:u,subcid:u,mac:u,imsi:u,uid:u,logintype:u,cityid:u,apn:u,mno:u,pushSetting:u,wifi:u,bht:u,ip:u,vendorid:u,geohash:u,dtk:u,sns:u,android_id:u,version_code:u,brand:u,utm:u},Lt="post",Bt="__lxvalidation",Vt="report.meituan.com",Jt="wreport1.meituan.net",Ut="hreport.meituan.com",Qt=-3,Kt=function(){};function t(){return window}function Wt(){return t().XMLHttpRequest}var Xt,$t,zt=(Xt=Wt(),$t=Xt&&"withCredentials"in new Xt,function(){return $t}),Ht=/__lxvalidation=([\w.]+)/i,Zt=10,Gt=!1,Yt=void 0,tn=void 0,nn={};function en(t){var n,e=0===Se().indexOf("http:")?"http:":"https:",r=e+"//"+t+"/",i=Fn.search.match(Ht)||[],o=function(){var t=se.get(Bt);if(t){var n=t.split("|");return{mis:n[0],env:n[1]||""}}return t||{}}();return(n=i&&i[1]||o.mis||"")&&(se.top(Bt,n+"|",Zt),r=e+"//"+t+"/?mis="+n,rn.debug=n),r}var rn={nt:at,inWXMP:!1,pageValLab:null,pageEnv:null,use_post:!1,cid:null,appnm:null,quit:null,useQR:!1,onWebviewAppearAutoPV:!0,positiveLab:!0,nativeSDKVer:null,cacheRetryMinutes:5,debug:!1},on=[];rn.on=function(t,n){on.push({name:t,fn:n})};var an={MVL:!(rn.emit=function(r,i,o,a,u){oe.each(on,function(t){var n=t.name,e=t.fn;n===r&&e(i,o,a,u)})}),QR:!1,getReqId:!1};function un(t){return!!an[t]}var cn={cv:"prod",web:1};function sn(t,n){t&&!n?delete cn[t]:cn[t]=n}function fn(t){return t?cn[t]:cn}function dn(t,n){ne.isStr(t)&&(nn[t]=n)}function ln(t){Gt=t}function vn(){return Gt===d}function pn(t){return Yt&&!t||(Yt=en(Vt)),Yt}var hn=[Jt,"wreport2.meituan.net"],mn=0;function gn(t){if(!tn||t){var n=hn[parseInt(mn++%12/6)];tn=en(n)}return tn}var _n=void 0;function yn(){if(Vn!==_n)return _n;var t=Rn.getElementsByTagName("meta");return _n="off"===he(t,"lx:native-report")}var bn=at;function wn(){return bn}function xn(t){yn()||(bn=t)}var Sn=!1;function kn(t){Sn=!!t}var On=5e3,qn=50,In={MVL:{}},jn=void 0,An=void 0;function Dn(t,n,e,r){r=r||{};var i=n.category,o=e.req_id,a=e.val_cid,u=e.val_bid,c=r.tag;if(In[t]&&ne.isStr(t)&&ne.isStr(i)&&ne.isStr(o)&&ne.isStr(a)&&ne.isStr(u)){var s=i+"_"+o+"_"+a+"_"+u,f=In[t];ne.isObj(f[s])||(f[s]={env:ne.extend(!0,{},n),evs:e,lab:[]}),ne.isObj(c)&&(f[s].evs.tag=c);var d=ne.extend(!0,e.val_lab,{_seq:e.seq,_tm:e.tm});f[s].lab.push(d),function(){var t=0;for(var n in In){var e=In[n];for(var r in e){var i=e[r].lab;t+=i.length||0}}qn<t&&Mn()}()}}function En(t,n){var e=(n||{}).withUnload,r=In[t];if(ne.isObj(r)){var i=[];for(var o in r){var a=r[o],u=!1;if(a.lab&&a.lab.length){var c=a.env,s=a.evs,f={mv_list:a.lab,custom:{_withUnload:!!e}};s.val_lab=f;for(var d=0,l=i.length;d<l;d++){var v=i[d];if(!Cn(v,c)){v.evs.push(s),u=!0;break}}u||(c.evs=[s],i.push(c))}}i.length&&An.send(i),In[t]={}}}function Cn(t,n){var e=0,r=0;for(var i in t)t.hasOwnProperty(i)&&e++;for(var o in n)n.hasOwnProperty(o)&&r++;var a=r<e?t:n,u=e<=r?t:n;for(var c in a){if(!(-1<"evs|".indexOf(c+"|")))if(ne.isObj(a[c])&&ne.isObj(u[c])){if(Cn(a[c],u[c]))return!0}else if(a[c]!==u[c])return!0}return!1}function Mn(t){var n=(t||{}).withUnload;for(var e in In)En(e,{withUnload:n})}D(function t(){clearTimeout(jn);try{Mn()}catch(t){}finally{wn()===at?jn=D(t,On):clearTimeout(jn)}},100);var Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn=t(),Fn=location,Rn=document,Pn=Rn.domain,Ln=navigator,Bn=Ln.userAgent.toString(),Vn=void 0,Jn=Array.prototype,Un=Object.prototype,Qn=decodeURIComponent,Kn=encodeURIComponent,Wn=Gn(),Xn=Un.toString,$n=Un.hasOwnProperty;function zn(){}function Hn(t){return void 0===t?"undefined":Nn(t)}function Zn(t,n){return Hn(t)===n}function Gn(){return+new Date}function Yn(){return Math.random()}function te(t){return Zn(t,"number")}var ne={};function ee(t,e,r){var i=void 0,o=!0===t;return o||(r=e,e=t),e&&ne.isObj(e)||(e={}),r&&ne.isObj(r)||(r={}),oe.each(r,function(t,n){o&&ne.isObj(r[n])?(i=e[n],e[n]=ne.isObj(i)?i:{},ee(o,e[n],r[n])):e[n]=r[n]}),e}ne.trim=function(t){return t.replace(/^[\s\uFEFF\xA0\u3000]+|[\s\uFEFF\xA0\u3000]+$/g,"")},ne.now=Gn,ne.rnd=Yn,ne.hasOwn=function(t,n){return $n.call(t,n)},ne.extend=ee;var re=function(t){return t&&"[object Object]"===Xn.call(t)};ne.isObj=re;var ie=function(t){return Zn(t,"string")};ne.isStr=ie,ne.isFunc=function(t){return Zn(t,"function")},ne.attr=function(t,n){return t.getAttribute(n)},ne.parseQuery=function(t){var i={};if(t){var n=t.replace(I,function(t,n,e,r){return r||""}).split("&");return oe.each(n,function(t){var n=t.split("="),e=n[0],r=n.slice(1).join("")||"";e&&!$n.call(i,e)&&(i[e]=Qn(r))}),i}},ne.stringifyQuery=function(t){var r=[];return ne.isObj(t)&&oe.each(t,function(t,n){var e;ne.isFunc(t)||(Vn!==t&&((e=t)||!Zn(e,"object"))||(t=t||""),r.push(Kn(n)+"="+Kn(t)))}),r.join("&")},ne.genReqId=function(){return""+1e3*Gn()+parseInt(1e3*Yn())},ne.run=function(t,n){ae(t)?oe.each(t,n):n(t)},ne.on=function(t,n,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent&&t.attachEvent("on"+n,e)},ne.off=function(t,n,e){t.removeEventListener?t.removeEventListener(n,e,!1):t.detachEvent&&t.detachEvent("on"+n,e)};var oe={isArray:function(t){return"[object Array]"===Xn.call(t)}},ae=function(t){if(!t)return!1;var n=t.length;return!!oe.isArray(t)||!!(t&&te(n)&&0<=n)&&(!ne.isObj(t)||(!(1<n)||n-1 in t))};oe.isArrayLike=ae,oe.find=function(e,r,i){var o=void 0;return ae(e)&&oe.each(e,function(t,n){if(!0===r.call(i,t,n,e))return o=t,!1}),o},oe.filter=function(e,r,i){var o=[];return ae(e)&&oe.each(e,function(t,n){r.call(i,t,n,e)&&o.push(t)}),o},oe.toArray=function(t,n,e){var r=[];return ae(t)&&oe.each(t,function(t){r.push(n?n.call(e,t):t)},e),r};var ue=function(t,n,e){if(t){var r=void 0,i=void 0,o=void 0;if(ae(t))for(i=0,o=t.length;i<o&&!1!==n.call(e,t[i],i,t);i++);else for(r in t)if(ne.hasOwn(t,r)&&!1===n.call(e,t[r],r,t))break}};oe.each=ue;var ce=function(t,n,e){if(t){for(var r=[],i=0,o=t.length;i<o;i++){var a=n.call(e,t[i],i,t);r.push(a)}return r}};oe.slice=function(t,n,e){return Jn.slice.call(oe.toArray(t),n,e)},oe.reduce=function(t,n){if(ae(t)&&ne.isFunc(n)){var e=t,r=e.length>>>0,i=0,o=void 0,a=arguments;if(3===a.length)o=a[2];else{for(;i<r&&!(i in e);)i++;if(r<=i)return;o=e[i++]}for(;i<r;)i in e&&(o=n(o,e[i],i,e)),i++;return o}};var se={};function fe(t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=void 0,r=void 0,i=void 0,o=void 0,a=void 0,u=0,c=0,s="",f=[];if(!t)return t;for(t=de(t);e=(a=t.charCodeAt(u++)<<16|t.charCodeAt(u++)<<8|t.charCodeAt(u++))>>18&63,r=a>>12&63,i=a>>6&63,o=63&a,f[c++]=n.charAt(e)+n.charAt(r)+n.charAt(i)+n.charAt(o),u<t.length;);switch(s=f.join(""),t.length%3){case 1:s=s.slice(0,-2)+"==";break;case 2:s=s.slice(0,-1)+"="}return s}function de(t){var n,e="",r=void 0,i=void 0,o=void 0;for(r=i=0,n=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,o=0;o<n;o++){var a=t.charCodeAt(o),u=null;a<128?i++:u=127<a&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==u&&(r<i&&(e+=t.substring(r,i)),e+=u,r=i=o+1)}return r<i&&(e+=t.substring(r,t.length)),e}se.del=function(t,n){var e=t+"=;path=/;domain="+n,r=new Date;return r.setFullYear(1970),e+=";expires="+r.toUTCString(),Rn.cookie=e,!0},se.get=function(t){var n=Rn.cookie.match(new RegExp("(?:^|;)\\s*"+t+"=([^;]+)"));return Qn(n?n[1]:"")},se.set=function(t,n,e,r){r=r||Rn.domain;var i=void 0,o=void 0,a=void 0,u=t+"="+Kn(n)+";path=/;domain="+r;Vn===e||isNaN(e)||(i=new Date,o=60*parseInt(e,10)*1e3,a=i.getTime()+o,i.setTime(a),u+=";expires="+i.toUTCString());try{return Rn.cookie=u,!0}catch(t){return!1}},se.top=function(t,n,e){var r=Rn.domain,i=r.split("."),o=i.length,a=o-1,u=void 0,c=!1;for(n=""+n;!c&&0<=a&&(r=i.slice(a,o).join("."),se.set(t,n,e,r),u=se.get(t),Vn!==u&&(c=u===n),a--,!c););},se.del=function(t){return se.top(t,"",-100)};var le=window.btoa,ve=fe;sn("btoa",!!window.btoa),sn("atob",!!window.atob);try{ne.isFunc(le)&&le(de(Bn))===fe(Bn)&&(ve=function(t){return le(de(t))})}catch(t){}var pe=ve;function he(t,n){var e=void 0,r=oe.find(t,function(t){return ne.attr(t,"name")===n});return r&&(e=ne.attr(r,"content")),e}function me(){var t=Tn[n];return Tn[t]}var ge,_e=(ge=void 0,{update:function(t){ge=t},get:function(){return ge}});function ye(t){var n=t||Gn(),e=me();_e.update(n),Wn=n,e&&(e.l=n)}function be(){var t={duration:function(){var t=void 0,n=_e.get(),e=Gn();if(n)t=n,_e.update(e);else{var r=me(),i=Tn.performance&&Tn.performance.timing;(t=i&&i.requestStart)||(t=r?r.l:Wn),_e.update(e)}return e-t}()},n=void 0,e=rn.quit;return ne.isFunc(e)&&(n=e()||{}),t=ne.extend(t,n||{})}function we(t,n){n[rt]}var xe=2032;function Se(){return Fn.protocol}/trident/i.test(Bn)||/msie/i.test(Bn)||!/mozilla.+webkit.+chrome.+/i.test(Bn)||(xe=6e3);var ke=0;function Oe(t,n){var e=/^((\d+\.)+\d+).*$/;if("string"!==Hn(t)||"string"!==Hn(n))return NaN;if(!e.test(t)||!e.test(n))return NaN;for(var r=t.replace(e,"$1").split("."),i=n.replace(e,"$1").split("."),o=0,a=Math.max(r.length,i.length);o<a;o++){if(!r[o]||!i[o])(!r[o]&&r||!i[o]&&i).push("0");var u=r[o].toString().length,c=i[o].toString().length;if(u!==c){var s=c<u?i:r;s[o]=Array(Math.abs(u-c)+1).join("0")+s[o].toString()}}var f=parseInt(r.join("")),d=parseInt(i.join(""));return f==d?0:d<f?1:-1}function qe(e,r,i,o,a,u,c){return function(t){if(!e){e=!0;try{if(r&&new Date-i<50)return;if(o)return;if(o=!1,!c()){var n=be();a("pageDisappear",n,{isAuto:6,shouldStore:!0})}Mn({withUnload:!0})}catch(t){}u&&u(t)}}}var Ie=4,je="",Ae=function(t){Ie=t},De=function(){return je&&3===Ie},Ee=function(t){je=t},Ce=function(){return je},Me=void 0;try{Me=Tn.sessionStorage}catch(t){Me=null}var Ne=void 0;Ne=ne.isFunc(Tn.atob)?Tn.atob:function(t){return t};var Te={},Fe=function(t,n){if(Te[t])try{Te[t](n),D(function(){delete Te[t]},0)}catch(t){}},Re=Bn,Pe=[{n:c,r:/lingxi\/demo\/\d+/i,v:Re},{n:r,r:/dp\/com\.dianping\.[\w.]+\/([\d.]+)/i,v:Re},{n:h,r:/\bmeituanwaimai-c\/\d+\./i,v:Re},{n:"moviepro",r:/\bmoviepro/i,v:Re},{n:"movie",r:/\bmaoyan\b/i,v:Re},{n:m,r:/\bmeituan \d+|meituangroup\/\d+\./i,v:Re}],Le=/android/i.test(Re),Be="",Ve=Le,Je=!1,Ue=!1,Qe="www",Ke=!1;if(/\bandroid|mobile\b|\bhtc\b/i.test(Re)){Qe="i",Ve=!0,oe.each(Pe,function(t){if(t.r.test(t.v))return Be=t.n,!1}),/\btitans(no){0,1}x\b/i.test(Re)&&(Je=!0);var We=/iphone/i.test(Re),Xe=/ipad/i.test(Re);(We||Xe)&&(Ue=!0),Be&&(We?Qe="iphone":/android/i.test(Re)?Qe="android":Xe&&(Qe="ipad"))}else{var $e=Re.match(/(msie) (\d+)|Trident\/(d+)/i);$e&&(Ke=!0,$e&&parseInt($e[2],10))}var ze=Tn.screen.width+"*"+Tn.screen.height,He=Bn.replace(/^.*TitansX\/([\d.]+)\s.*$/i,"$1"),Ze=!(!Ve||!/\sMMP\//.test(Re)),Ge=!(!Ve||!/\sMicroMessenger/.test(Re)||Ze),Ye=Je||/ knb\/\d+/i.test(Bn),tr=function(){return Ve&&Ye&&!Ge&&!Ze},nr=A+"_source",er=A+"_medium",rr=A+"_term",ir=A+"_campaign",or=A+"_content",ar=void 0,ur=!1;function cr(t){if(!t)return Vn;var e=Vn,r=/^utm_(source|medium|term|content|campaign)$/;return oe.each(t,function(t,n){r.test(n)&&(!e&&(e={}),e[n]=t)}),e}function sr(t){if(t){ar=t;var n=ne.stringifyQuery(t);return se.del(vt,Pn),se.top(vt,n,ft,Pn),!0}return!1}function fr(t,n){var o,e,r,i,a;return(!ar&&!ur||t)&&(t=t||Fn.href,n=n||Rn.referrer,a=t,(ar=cr(ne.parseQuery(a))||function(t){var n=Vn,e=t.match(/^[\w-]+:\/\/([^/]+)(?:\/([^?]+)?)?/),a=e&&e[1];if(a){var u=ne.parseQuery(t),r="daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q cnn:query virgilio:qs baidu:wd baidu:word alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT search.smt.docomo:MT onet:qt onet:q kvasir:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q centrum.cz:q 360.cn:q sogou:query tut.by:query globo:q ukr:q so.com:q haosou.com:q auone:q m.baidu:word wap.baidu:word baidu:word Baidu:bs www.soso:w wap.soso:key www.sogou:query wap.sogou:keyword m.so:q m.sogou:keyword so.com:pq youdao:q sm.cn:q sm.cn:keyword haosou:q".split(" "),c="",s="";oe.each(r,function(t){var n=t.split(":"),e=n[0],r=n[1],i=u[r],o=-1<e.indexOf(".")?e:"."+e+".";if(-1<a.indexOf(o.toLowerCase())&&(s=e,c=i))return!1}),s&&((n={})[nr]=s,n[er]="organic",c&&(n[rr]=c))}return n}(n))?sr(ar):(i=se.get(vt),ar=I.test(i)?cr(ne.isStr(i)?ne.parseQuery(i):null):ar),ar||(o=void 0,e=se.get("__utmz"),(r=e&&e.match(/(utmc(tr|sr|cn|md|ct))=([^|()]+)/g))&&oe.each(r,function(t){var n=t.split("="),e=n[0],r=void 0,i=n[1]||"";"utmcsr"===e?r=nr:"utmccn"===e?r=ir:"utmcmd"===e?r=er:"utmcct"===e?r=or:"utmctr"===e&&(r=rr),r&&((o=o||{})[r]=i)}),sr(ar=o)),ur=u),ar}var dr,lr,vr,pr,hr=Tn.JSON;hr||(hr={parse:function(t){return new Function("return ("+t+")")()},stringify:(dr=oe.isArray,lr={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},vr=function(t){return lr[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},pr=/[\\"\u0000-\u001F\u2028\u2029]/g,function t(n){if(null==n)return"null";if(Zn(n,"number"))return isFinite(n)?n.toString():"null";if(Zn(n,"boolean"))return n.toString();if(Zn(n,"object")){if("function"===Hn(n.toJSON))return t(n.toJSON());if(dr(n)){for(var e="[",r=0;r<n.length;r++)e+=(r?", ":"")+t(n[r]);return e+"]"}if(ne.isObj(n)){var i=[];for(var o in n)n.hasOwnProperty(o)&&i.push(t(o)+": "+t(n[o]));return"{"+i.join(", ")+"}"}}return'"'+n.toString().replace(pr,vr)+'"'})});var mr=hr,gr="__lxsdk_",_r=void 0;try{_r=Tn.localStorage}catch(t){_r=null}function yr(t){return gr+t}function br(){return{length:0,_data:{},setItem:function(t,n){return this.length++,this._data[t]=String(n)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:Vn},removeItem:function(t){return this.length--,delete this._data[t]},clear:function(){return this.length=0,this._data={}},key:function(t){var n=[],e=this._data;return oe.each(e,function(t){ne.hasOwn(e,t)&&n.push(t)}),n[t]}}}var wr={get:function(t){t=yr(t);var n=_r.getItem(t);return n=Vn!==n?mr.parse(n):n},set:function(t,n){wr.del(t);try{return _r.setItem(yr(t),mr.stringify(n))}catch(t){}},keys:function(){for(var t=[],n=void 0,e=0;e<_r.length;e++)0===(n=_r.key(e)).indexOf(gr)&&t.push(n.replace(gr,""));return t},del:function(t){try{return _r.removeItem(yr(t))}catch(t){}},clear:function(){for(var t=this.keys(),n=0;n<t.length;n++)this.del(t[n])}};if(_r){if(_r){var xr="___lxtest";wr.nt=!0;try{wr.set(xr,1),1!==wr.get(xr)?wr.clear():wr.del(xr)}catch(t){try{wr.clear(),_r.setItem(xr,1),_r.removeItem(xr)}catch(t){_r=br(),wr.nt=!1}}}}else _r=br(),wr.nt=!1;var Sr="tag",kr=18e5;function Or(t,n,e,r,i,o){var a={};a.c=t,a.k=n,a.v=e,a.t=r||+new Date,a.u=i||"",a.r=o||"",this.toJSON=function(){return ne.extend(!0,{},a)}}var qr={set:function(t,n,e){var r=void 0,i=[],o=wr.get(Sr)||[];if(!ne.isStr(n)||""===n)return!1;for(var a=0,u=o.length;a<u;a++)Ir(r=o[a])||(t===r.c?n!==r.k&&i.push(r):i.push(r));return r=new Or(t,n,e,+new Date),i.push(r.toJSON()),wr.set(Sr,i),!0},get:function(t,n){var e=void 0,r=wr.get(Sr);if(r&&r.length)return e={},oe.each(r,function(t){var n={};n[t.k]=t.v,Ir(t)||(e[t.c]=ne.extend(!0,e[t.c]||{},n))}),t&&n?e[t]&&e[t][n]:t?e[t]:e},getAll:function(){var t=wr.get(Sr),e={},r=void 0;return oe.each(t,function(t){var n=void 0;!Ir(t)&&t.v&&(r=!0,(n={})[t.k]=t.v,e[t.c]=ne.extend(!0,e[t.c],n))}),r&&e},clear:function(n,e){if(!arguments.length)return wr.set(Sr,[]);if(ne.isStr(n)){var t=wr.get(Sr),r=[];oe.each(t,function(t){(e!==Vn&&t.k!==e||n!==t.c)&&r.push(t)}),wr.set(Sr,r)}}};function Ir(t){var n=ne.now();return kr<n-t.t}function jr(t){return t}function Ar(t){try{t(Tr(this,Er),Tr(this,Dr))}catch(t){if(this._state===Cr)return Rr(new Ar(jr),Dr,t)}}Ar.prototype.then=function(t,n){return function(t,n,e,r){Hn(e)===Mr&&(n._onFulfilled=e);Hn(r)===Mr&&(n._onRejected=r);t._state===Cr?t[t._pCount++]=n:Fr(t,n);return n}(this,new Ar(jr),t,n)},Ar.all=function(l){return new Ar(function(r,e){for(var t,n,i,o=0,a=l.length,u=[],c=0,s=void 0,f=function(e){return function(t){if(e.value=t,e.state=Er,++c===e.len&&!s){var n=function(t){var n=[];for(o=0;o<a;o++)n.push(t[o]?t[o].value:void 0);return n}(u);r(n)}}},d=function(n){return function(t){n.value=t,n.state=Dr,c++,s||(s=!0,e(t))}};o<a;o++)n=t=void 0,n=l[o],i={value:null,index:o,state:null,len:a},u.push(i),t=i,n.then?n.then(f(t),d(t)):Ar.resolve(n).then(f(t),d(t))})},Ar.resolve=function(n){if(n instanceof Ar)return n;if(ne.isFunc(n.then)){var e=n.then.bind(n);return new Ar(function(t,n){e(t,n)})}return new Ar(function(t){t(n)})},Ar.reject=function(e){return new Ar(function(t,n){n(e)})};var Dr=0,Er=1,Cr=2,Mr="function",Nr="object";function Tr(n,e){return function(t){return Rr(n,e,t)}}function Fr(e,r){return setTimeout(function(){var t=void 0,n=e._state?r._onFulfilled:r._onRejected;if(void 0!==n){try{t=n(e._value)}catch(t){return void Rr(r,Dr,t)}Pr(r,t)}else Rr(r,e._state,e._value)})}function Rr(t,n,e){if(t._state===Cr){t._state=n,t._value=e;for(var r=0,i=t._pCount;r<i;)Fr(t,t[r++]);return t}}function Pr(n,t){if(t!==n||!t){var e=void 0,r=Hn(t);if(null===t||r!==Mr&&r!==Nr)Rr(n,Er,t);else{try{e=t.then}catch(t){return void Rr(n,Dr,t)}Hn(e)===Mr?function(n,e,t){try{t.call(e,function(t){e&&(e=null,Pr(n,t))},function(t){e&&(e=null,Rr(n,Dr,t))})}catch(t){e&&(Rr(n,Dr,t),e=null)}}(n,t,e):Rr(n,Er,t)}return n}Rr(n,Dr,new Error("promise_circular_chain"))}Ar.prototype._state=Cr,Ar.prototype._pCount=0;var Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br=function(){var t=!("undefined"==typeof window||!window.navigator||!window.navigator.userAgent);function e(){return t?navigator.userAgent.toLowerCase():""}function r(t){for(var n={},e=t.replace(/\([^)]+\)/g,"").split(/\s+/),r="",i=0;i<e.length;i+=1){var o=e[i],a=o.lastIndexOf("/");if(a<0)r=o;else{var u=o.slice(0,a);r&&(u=r+" "+u,r=""),n[u]=o.slice(a-o.length+1)}}return n}function c(t){var n=t||"0",e=n.match(/^(\d*)/);return e?Number(e[1]):0}function o(t,n){for(var e="string"==typeof t?t.split("."):["0"],r="string"==typeof n?n.split("."):["0"],i=Math.max(e.length,r.length),o=0;o<i;o+=1){var a=c(e[o]),u=c(r[o]);if(u<a)return 1;if(a<u)return-1}return 0}function a(t){var n=-1,e=document.createElement("iframe");function r(){if(clearTimeout(n),e){var t=e.parentNode;t&&t.removeChild(e),e.onload=null,e.onerror=null,e=null}}e.style.display="none",e.onload=r,e.onerror=r,e.src=t,document.documentElement.appendChild(e),n=setTimeout(r,3e3)}function u(t){window.KNBTitansX&&window.KNBTitansX.sendMessage?window.KNBTitansX.sendMessage(t):window.prompt(t)}function s(t){window.prompt(t)}var n,i={getDefaultSender:function(){var i=Function.prototype,t=e();if(/ios|iphone|ipod|ipad/.test(t))i=a;else if(/android/.test(t)){var n=r(t);i=0<o(n.android,"4.2.0")?u:s}return function(t,n,e){var r="js://_?method="+t+"&callbackId="+e+"&args="+encodeURIComponent(n);i(r)}},compareVersion:o,parseUserAgent:r,canUseSlot:(n=r(e()),0<=o(n.titansx||n.titansnox,"11.13"))},f=i.getDefaultSender,d=i.compareVersion,l=i.parseUserAgent,v=i.canUseSlot,p="function"==typeof Symbol&&"symbol"===Lr(Symbol.iterator)?function(t){return void 0===t?"undefined":Lr(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":Lr(t)},h={sender:null};function m(t){return"DPApp_callback_"+t}function g(t,n){var e=m(t),r=window[e];r&&(r(n),r.isSafeDelete&&(window[e]=void 0))}function _(t){var n=t||"DPApp";if(!window[n]||!window[n].KNBCore){var e={dequeue:window[n]&&window[n].dequeue||Function.prototype,KNBCore:!0,callback:g};window[n]=function(t,n){if(t&&"object"===(void 0===t?"undefined":p(t))){var e=t;return Object.keys(n).forEach(function(t){e[t]=n[t]}),e}return n}(window[n],e)}}var y,b={bindSender:function(t){"function"==typeof t&&(h.sender=t)},sendMessage:function(t,n,e,r){var i=v&&r?"KNBSlot"+r:void 0;_(i);var o=function(t){if(!/^[a-zA-Z0-9]*$/.test(t))throw new Error("illegal slot name");var n=Math.floor(1e3*Math.random());return+(Date.now().toString().slice(-5)+""+n)+(t?"_"+t:"")}(i),a=m(o),u=e||{};window[a]=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.status,e="action"===n?"handle":n;"0"===String(e)&&(e="success"),"handle"!==e&&"success"!==e&&(e="fail");var r=u[e]||Function.prototype;if("function"==typeof r)return r(t)},u.handle||(window[a].isSafeDelete=!0),h.sender&&h.sender(t||"",JSON.stringify(n||{}),o)},fireCallback:g,compareVersion:d,parseUserAgent:l};return y=b,"undefined"!=typeof window&&(h.sender=f(),window.KNBCore||(window.KNBCore=y)),b}(),Vr=!1,Jr=[],Ur=void 0,Qr=void 0;function Kr(t){tr()?c===Be?t(Vn,Qr):Vr?t(Ur,Qr):(Jr.push(t),Vr?t(Vn,Qr):new Promise(function(t){t({ready:function(t){return t()},use:function(t,n){n=n||{},Br.sendMessage(t,{data:n.data||{}},n,"LXAnalyticsSDK")}}),Vr=!0}).then(function(t){var n,e,r=Qr=t;n=Ur,e=r,oe.each(Jr,function(t){t(n,e)}),Jr=[]})):t(e,Qr)}var Wr=500,Xr="getUserInfo";function $r(){return new Ar(function(o,r){Kr(function(t,n){var e=Tn.DPApp,i=D(function(){o({})},Wr);n?n.ready(function(){n.use(Xr,{success:function(t){var n,e,r;f(i),o((e={},(r=(n=t)[k])&&"0"!==r||"dp"!==n.type?n[k]&&(e[k]=n[k]):e[k]=n[y],"dp"!==n.type&&n[y]&&(e[y]=n[y]),n.unionId&&(e.unionId=n.unionId),n.userId&&(e.userId=n.userId),e))},fail:function(t){f(i),r({code:j})}})}):e&&e[Xr]?e.ready(function(){e[Xr]({success:function(t){f(i);var n={};(t.dpid||t.userId)&&(n.dpid=t.dpid,n.userId=t.userId,n.unionId=t.unionId),o(n)},fail:function(t){f(i),r({code:a,res:t})}})}):r({code:a})})})}var zr,Hr=!Ke&&Tn.indexedDB,Zr=Tn.IDBFactory,Gr=Hr&&ne.isFunc(Hr.open)&&Hr.constructor===Zr,Yr=!1,ti=void 0,ni=void 0,ei=void 0,ri=60*(parseInt(rn.cacheRetryMinutes)||5),ii=!1,oi=0;function ai(){return new Ar(function(n,e){if(!Gr)return e();if(Yr)return n();try{(ti=Hr.open("_lxsdk_db",1e3)).onsuccess=function(t){Yr=!0,ni=t.target.result,n()},ti.onupgradeneeded=function(t){ni=t.target.result,(ei=ni.createObjectStore("cache",{keyPath:"id",autoIncrement:!0})).createIndex("evs","evs",{unique:!1}),ei.createIndex("type","type",{unique:!1})}}catch(t){Yr=!1,e()}})}function ui(){ai().then(function(){var e=ni.transaction(["cache"],"readwrite").objectStore("cache"),t=e.openCursor(),r=[];t.onsuccess=function(t){var n=t.target.result;n?(r.push(n.value),n.continue()):(oi=r.length,r.forEach(function(t){!function(t){if("get"===t.type){var n=document.createElement("img"),e=Math.random();n.src="//"+Jt+"/?d="+pe("["+t.evs+"]")+"&t=1&r="+e+"&_lxsdk_rnd="+e,n.id=e,window["img_"+e]=n}else try{window.navigator.sendBeacon("//"+Vt,t)}catch(t){}}(t),e.delete(t.id)}))}})}ai();var ci={add:function(t,e){ai().then(function(){var n=ni.transaction(["cache"],"readwrite").objectStore("cache");100<oi&&n.clear(),t.forEach(function(t){t.evs.forEach(function(t){t.lx_inner_data=t.lx_inner_data||{},t.lx_inner_data.fc=1}),n.add({type:e,evs:JSON.stringify(t)})})})},size:function(){},remove:function(){},check:ui,startPoll:function(){!ii&&Gr&&(ii=!0,zr=+new Date,ai().then(function(){setTimeout(function t(){var n="_lxsdk_rc_img",e=Tn[n]=new Image;e.onload=function(){ui(),ii=!1,Tn[n]=null},e.onabort=e.onerror=function(){+new Date-zr>1e3*ri||(setTimeout(t,6e3),Tn[n]=null)},e.src="//"+Jt+"/?r="+Math.random()},6e3)}))}},si=3,fi=150,di=5e3,li=3500,vi=!1,pi=[],hi=[],mi=0,gi=0,_i=!rn.use_post,yi=Le&&/baiduboxapp\//.test(Re)||/Mozilla.+AppleWebKit.+Chrome.+Safari.+/i.test(Re)&&!Ve,bi=!Ke&&ne.isFunc(Ln.sendBeacon);function wi(t,n,e,r,i){var o=[{project:"web-lx-sdk",pageUrl:Fn.href,resourceUrl:t,category:i?"jsError":"ajaxError",sec_category:"prod_"+n,level:"error",unionId:e,timestamp:ne.now(),content:""+r||""}],a=Ii("//catfront.dianping.com/api/log?v=1",Lt,"application/x-www-form-urlencoded");a&&(a.onerror=a.onreadystatechange=function(){},a.send("c="+encodeURIComponent(mr.stringify(o))))}function xi(t,n){if(si<=gi)return!1;n=ne.extend({cb:zn},n||{});var e=pn();_i=!rn.use_post;try{_i?function(e,r){var t=Gn().toString(16)+mi++,i=pn(),o=!1,a=!1,u=void 0,c=void 0,s=(n=e,f=[],d=[{l:At,s:Dt},{l:wt,s:xt},{l:St,s:kt},{l:Ot,s:qt},{l:Et,s:Ct},{l:It,s:jt}],oe.each(n,function(t){var n=ne.extend(!0,{},t);oe.each(d,function(t){ji(n,t.l,t.s)});var e=[];oe.each(t.evs,function(r){r=ne.extend(!0,{},r),oe.each(r,function(t,n){if(-1<n.indexOf("val_")&&(r[n.replace("val_","")]=r[n],delete r[n]),ji(r,"refer_url","urlr"),r[n]&&"url"===n){var e=Fn.hash;e&&(r.urlh=e),delete r[n]}}),e.push(r)}),n.evs=e,n[Ct]===n.uuid&&delete n.uuid;var r=n[kt];r&&(n[kt]=r.replace("data_sdk_","")),delete n.ua,f.push(n)}),f);var n,f,d;if(oe.each(s,function(t){c=t.uuid||t.lxid,delete t.ua}),!function(t){for(var n=t.length,e=n,r=0;r<n;r++)127<t.charCodeAt(r)&&e++;return 1.5*e<xe}(u=mr.stringify(s)))return oe.each(e,function(t){oe.each(t.evs,function(t){var n=t.val_lab;t.val_lab=ne.extend(!0,{custom:{_s:1}},n||{})})}),Oi(i,e,{cb:function(t,n){try{r(t,n,"ajax-post")}catch(t){}t!==N&&(!o&&bi&&(o=!0,Si(i,e)),a||(a=!0,wi(location.host+location.pathname,"ajax-post-"+t+"-"+n,c,u)))}});var l=pe(u),v=Kn(l),p=gn(!0);p+=-1<p.indexOf("?")?"&d="+v:"?d="+v,v.length,p=p+"&t=1&r="+t,yi?Oi(p,null,{method:"get",cb:function(t,n){try{r(t,n,"ajax-get")}catch(t){}t!==N&&(!o&&bi&&(o=!0,Si(i,e),ci.add(s,"get"),ci.startPoll()),a||(a=!0,wi(location.host+location.pathname,"ajax-get-"+t+"-"+n,c,u)))}}):function t(n,e,r){var i=void 0,o=Rt+ke++;if(e=e||{},!(2<(r=r||0)))return Tn[o]=i=new Image,i.onload=function(){ne.isFunc(e.cb)&&e.cb(!0),Tn[o]=null},i.onabort=i.onerror=function(){Tn[o]=null,D(function(){t(n,e,++r)},100)},i.src=n,i;ne.isFunc(e.cb)&&e.cb(!1)}(p,{cb:function(t){if(t)try{r(N,200,"image-get")}catch(t){}else{try{r(Qt,0,"ajax-get-to-image-get")}catch(t){}!o&&bi&&(o=!0,Si(i,e),ci.add(s,"get"),ci.startPoll()),a||(a=!0,wi(location.host+location.pathname,"image-get-500-0",c,u))}}})}(t,n.cb):Oi(e,t,n)||Ke&&ki(e,t,n)||Si(e,t)&&n.cb(N)}catch(t){return wi(Fn.path,"report-ajax",0,t.message,!0),!1}return!0}function Si(t,n){var e=Ln.sendBeacon;return!!e&&(oe.each(n,function(t){oe.each(t.evs,function(t){t.lx_inner_data=ne.extend(!0,{},t.lx_inner_data),t.lx_inner_data.beacon="1"})}),t=qi(t),e&&e.call(Ln,t,mr.stringify(n)))}function ki(t,n,e,r){if(!Tn.XDomainRequest)return!1;try{var i=new XDomainRequest;return i.open(Lt,qi(t),!0),i.onload=function(){gi=0,e&&e.cb(N,200,"IEXDR-post"),pi=[]},i.onerror=function(){gi++,e&&e.cb(F,0,"IEXDR-post")},i.ontimeout=function(){gi++,r||(!function(t,n,e,r){pi=pi.concat(n);var i=void 0,o=oe.reduce(pi,function(t,n){return n.evs=t.evs.concat(n.evs),i=n.evs.length,fi<i&&oe.slice(n.evs,i-fi,i),n});if(pi=[o],hi.push(r),!vi)var a=setInterval(function(){if(si<=gi)return clearInterval(a),!1;e(t,pi,function(n){clearInterval(a),vi=!1,oe.each(hi,function(t){t&&t(n)})},!0)},li)}(t,n,ki,e),vi=!0)},i.timeout=di,i.send(mr.stringify(n)),!0}catch(t){return!1}}function Oi(n,e,r,i){if(!zt())return!1;try{var o=r&&r.method||Lt,a=ne.isFunc(r.cb)&&r.cb||Kt,u=Ii(n,o,"text/plain");return u.onreadystatechange=function(){if(4===u.readyState){var t=u.status;200<=t&&t<400?(gi=0,a(N,u.status,"ajax-"+o),pi=[]):i?a(P,u.status,"ajax-"+o):Oi(n,e,r,!0),u.onreadystatechange=null}},u.onerror=function(){a(F,u.status,"ajax-"+o)},u.send(o===Lt&&mr.stringify(e)||null),!0}catch(t){return wi(n,"runtime",0,t.stack||t.message),!1}}function qi(t){var n="_lxsdk_rnd="+(Gn().toString(16)+mi);return-1===t.indexOf("?")?t+"?"+n:t+"&"+n}function Ii(t,n,e){var r=new(Wt());return r.open(n||Lt,qi(t),!0),r.timeout=di,r.setRequestHeader("Content-Type",e),r}function ji(t,n,e){return $n.call(t,n)&&t[n]&&(t[e]=t[n],delete t[n]),t}var Ai,Di="t_lxid",Ei=void 0,Ci=(Ai=function(){for(var t=1*new Date,n=0;t===1*new Date&&n<200;)n++;return t.toString(16)+n.toString(16)},function(t){var n=(screen.height*screen.width).toString(16);return Ai()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var t=Re,n=void 0,e=void 0,i=[],r=0;function o(t,n){var e=void 0,r=0;for(e=0;e<n.length;e++)r|=i[e]<<8*e;return t^r}for(n=0;n<t.length;n++)e=t.charCodeAt(n),i.unshift(255&e),4<=i.length&&(r=o(r,i),i=[]);return 0<i.length&&(r=o(r,i)),r.toString(16)}()+"-"+n+"-"+Ai()+(t?"-tid":"")});function Mi(){var t,n=se.get(ht)||Ci();return(t=n)&&se.top(ht,t,dt),n}function Ni(){return Math.floor(1+65535*ne.rnd()).toString(16).substring(1)}function Ti(){var t=[],n=+new Date;return t.push(n.toString(16)),t.push(Ni()),t.push(Ni()),t.push(Ni()),t.join("-")}function Fi(t){var n=t.match(/(\d+)(?:\.(\d+)(?:\.(\d+))?)?/),e=[];if(n)for(var r=1;r<n.length;r++)e.push(parseInt(n[r]||0));return e}function Ri(t,n){var e=Fi(t),r=Fi(n);return!(e[0]<r[0])&&(!(e[0]===r[0]&&e[1]<r[1])&&!(e[0]===r[0]&&e[1]===r[1]&&e[2]<r[2]))}var Pi="getEnv",Li=T,Bi=!1,Vi=!1,Ji=!1,Ui=!1,Qi=[],Ki=0,Wi=void 0,Xi=ne.now();function $i(t){var n=(t._opts||{}).nativeOptions||{};return{cb:"_lx"+(100*ne.now()+Ki++),mn:t._mn,cn:t._cn,data:t._d||{},options:n,ver:4}}function zi(t,n,e,r,i){i=i||{};var o=this;o._cn=t,o._mn=n,o._d=e,o._cb=r,o._opts=i}function Hi(t,n,e,r,i){if(F===Li||R===Li)return r(Li);var o=new zi(t,n,e,Kt,i);if(N===Li)o.send(function(t,n){r(t,n)});else if(T===Li){if(Qi.push([o,r]),!Bi){Bi=!0;new Date;new zi(t,Pi,{}).send(function(r,t){if(new Date,r&&M(r),r)Li=F;else{if(Li=N,xn(ot),ne.isStr(t))try{t=mr.parse(t)}catch(t){}var n=(Wi=t).sdk_ver||"";Vi=Ri(n,"4.0.0"),Ji=Ri(n,"4.3.0"),Ui=!Ri(n,"4.8.0")}oe.each(Qi,function(t){var n=t[0],e=t[1];r?(M(r),e(r)):n.send(function(t,n){e(t,n)})})})}}else r(P)}function Zi(){return Vi}zi.prototype.send=function(e){var r=this,i=$i(r),t="statistics://_lx/?data="+Kn(mr.stringify(i)),n=ne.now();Wi&&5e3<n-Xi&&r._mn===Pi&&Li===N?(r._mn,e(0,Wi)):(r._mn,i.cb,function(i,o,a){if(Be!==c||!window.JavaScriptBridge)return Kr(function(t,n){if(t)return a(t);var e=!1,r=D(function(){e=!0,a(p)},5e3);n.use(i,{data:o,success:function(t){if(f(r),!e)if("success"===t.status){var n=t.data||{};try{ne.isStr(n)&&(n=mr.parse(n)),a(Vn,n.data?n.data:t)}catch(t){a(t)}}else a(E)},fail:function(){f(r),e||a(E)}})});window.JavaScriptBridge.log(o,function(t){var n=t.data;try{ne.isStr(n)&&(n=mr.parse(n)),a(Vn,n.data?n.data:n)}catch(t){a(t)}})}("lxlog",t,function(t,n){t?(r._mn,i.cb,new Date,M(t)):(r._mn,i.cb,new Date),e(t,n)}))};var Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yi={},to=ut,no=[],eo=null,ro={s:b,l:_,a:O,w:"wxid",lch:"lch",u:{us:"utm_source",um:"utm_medium",uc:"utm_content",ucp:"utm_campaign",ut:"utm_term"},sc:"scene",v:"_lx_validcode",uni:s,di:k,ui:y,wxi:"wxunionid"},io="_lxsdk_wxenv_",oo=["sdk_ver","ua"];function ao(t){var n=/(^\w+-\w+-\w+-\w+-\w+)/;if(n.test(t)){var e=t.match(n);se.top(pt,e[1],dt)}else t&&!/(^\w+\.\d+\.\d+\.\d+\.\d+)/.test(t)&&t.length<100?se.top(pt,t,dt):se.top(pt,"",-1)}var uo=0,co=1,so=2,fo="|";function lo(t){var n=se.get(gt);return n?n.split(fo)[t]:""}function vo(t,n,e){var r,i,o;se.top(gt,(r=n,i=e,(o=[]).push(t||po()),o.push(r||ho()),o.push(i||mo()),o.join(fo)),lt)}function po(){return lo(uo)}function ho(){return lo(co)}function mo(){var t=0,n=lo(so);return isNaN(n)||(t=parseInt(n)),t<0?0:t}var go,_o=void 0,yo=(go="_lxsdk_test",se.set(go,"1"),!(-1<Rn.cookie.indexOf(go)&&(se.del(go),1)));function bo(){if(yo)return _o=_o||0,++_o;var t=mo();return t=t||0,vo(Vn,Vn,++t),t}function wo(t,c){return new Ar(function(a,u){D(function(){u({code:p})},3e3),Hi(t,"getEnv",{},function(t,n){if(t)u(t);else{eo=rn.nativeSDKVer=n.sdk_ver,o=rn.nativeSDKVer,ne.isStr(o)&&(an.MVL=-1<Oe(o,"4.14.0"),an.QR=-1<Oe(o,"4.14.0"),an.getReqId=-1<Oe(o,"4.12.0"));var e={uuid:y,msid:b,uid:x,dpid:k,appnm:O,union_id:s};for(var r in c=c||{},e){var i=e[r];n[r]&&(c[i]=n[r])}a(c)}var o})})}function xo(){var t=se.get(_t);if(t){var n=t.split(","),e=/^\d+\.\d{5,}$/;return 3!==n.length?null:e.test(n[0])&&e.test(n[1])?{lat:n[0],lng:n[1],tm:n[2]}:null}return null}function So(t){return ne.extend(!0,{},t)}function ko(t){var n=Rn.getElementsByTagName("meta"),e=he(n,"lx:appnm"),r=he(n,"lx:defaultAppnm"),i=Be,o=Rn.domain,a=wn();return dn("appnm",e),dn("defaultAppnm",r),Ve&&Ee(Be||e||r||o),Je?e||(2===a?t:i||(r||o)):e||(i||(r||o))}function Oo(){var t,n,e,r,i,o,a=Be===m||Be===h||Ge||Ze,u=(t=se.get(pt),n=se.get("iuuid")||se.get("uuid")||t,e=po(),r=ho(),i=se.get(mt)||se.get(k),o={},n&&(o[y]=n),e&&(o[b]=e),t&&(o[_]=t),r&&(o[x]=r),i&&(o[k]=i),o),c=void 0,s={};a&&(s=function(t){var n={};if(I.test(t)){var e=ne.parseQuery(t);if(e[y]&&(n[y]=e[y]),e[w]&&(n[w]=e[w]),e[S]&&(n[x]=e[S]),e.__lxsdk_params){var i={},r=decodeURIComponent(decodeURIComponent(e.__lxsdk_params)).split(";"),o=ro.u,a=void 0;oe.each(r,function(t){var n=t.split(":"),e=n[0],r=n[1];if(r)if(o[e])(a=a||{})[o[e]]=r;else{if(!ro[e])try{r=Ne(r)}catch(t){}i[e]=r}}),a&&(i[A]=a),n[q]=i}return n}return n}(Fn.href)),Be===m&&(s[y]?(u[y]?s[y]!==u[y]?sn("uuidState","2"):sn("uuidState","3"):(u[y]=s[y],sn("uuidState","1")),delete s[y]):sn("uuidState","0")),(c=ne.extend(u,s)).ct=Qe;var f=fr();f&&(c[A]=f);var d=Mi();c[_]=d,c[y]||(c[y]=d),c[b]||(c[b]=Ti(),vo(c[b],c.uid||"")),c[y]&&ao(c[y]);var l=ko();ne.isStr(l)&&(c[O]=l);var v,p=(v=Bn.replace(/^.*([A-Za-z-]+)\/com\.(sankuai(?!\.meituan\.)|meituan(?!\.sankuai\.)|dianping|sankuai\.meituan|meituan\.sankuai)\.([.A-Za-z0-9-]+)\/(\d+[.\d]+).*$/,"$4"),/^\d+(\.\d+)+$/.test(v)?v:null);return p&&(c.app=p),c}function qo(n){return function(t){var e=t;return n!==t&&(e=ne.extend(n,t)),e.dpid&&e.uid?e:$r().then(function(t){var n={};return t.dpid&&(n.dpid=t.dpid,t.userId&&(n.uid=""+t.userId),t.unionId&&(n.union_id=t.unionId)),e=ne.extend(e,n)},function(t){return M(t),e})}}var Io=function(t){en();var a=Oo();if(tr()){var n=wo(t,a);return r===Be&&(n=n.then(qo(a),function(t){return M(t),qo(a)()})),n.then(function(t){var n=ko(t[O]),e=t[k],r=t[y],i=t[s],o=t;return t!==a&&(o=ne.extend(a,t)),ne.isStr(n)&&(o[O]=n),r&&ao(r),e&&se.top(mt,e,dt),i&&se.top("_lxsdk_unoinid",i,dt),o},function(t){return t&&M(t),a})}var e,u=So(a),c=u[q];return(e=ne.now(),new Ar(function(t){if(Ge||Ze)if(/miniProgram/i.test(Bn))t(!0);else if(Tn.WeixinJSBridge&&Tn.WeixinJSBridge.invoke)t("miniprogram"===Tn.__wxjs_environment);else{var n=setTimeout(function(){rn.wx_t=ne.now()-e,t(!1)},5e3);Rn.addEventListener("WeixinJSBridgeReady",function(){clearTimeout(n),rn.wx_t=ne.now()-e,t("miniprogram"===Tn.__wxjs_environment)})}else t(!1)})).then(function(t){if(rn.inWXMP=t){if(rn.nt=Ze?7:6,"object"===(void 0===Me?"undefined":Gi(Me))&&!ne.isObj(c))for(var n in c={},Me)if(0===n.indexOf(io)){var e=n.slice(io.length),r=Me[n];if(e===A)try{c[A]=JSON.parse(r)}catch(t){}else c[e]=r}var i=function(t){var n=ro[t]||t,e=c[t];e&&(u[l]=u[l]||{},u[n]&&(u[l][n]=u[n]),oe.find(oo,function(t){return t===n})||(u[n]=e));try{Me.setItem(io+n,re(e)?JSON.stringify(e):e)}catch(t){}};for(var o in c)i(o)}else rn.nt=at;return delete u[q],Ar.resolve(u)})};function jo(t){return st===to?Ar.resolve(So(Yi)):ct===to?new Ar(function(n){var t;t=function(t){n(t)},no.push(t)}):(to=ct,Io(t).then(function(e){return Yi=ne.extend(!0,{},e||{}),to=st,oe.each(no,function(t,n){ne.isFunc(t)&&no[n](e)}),e}))}var Ao=/([a-fA-F0-9-]+)(\.\d+)/,Do="_hc.v",Eo=525600,Co="",Mo=/(dper|dianping|51ping)\.com/.test(Pn);function No(){return function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}()+"."+Math.round(+new Date/1e3)}function To(){return!Co&&Mo&&(Co=function(){var t=se.get(Do);if(t||(t=No(),se.top(Do,t,Eo)),t){var n=t.match(Ao);return n?n[1]:""}return""}()),Co}var Fo=function(){var t=void 0;try{var n=document;if(n.querySelectorAll){var e=n.querySelectorAll("head script"),r=n.querySelectorAll("body script"),i=[];oe.each(e,function(t){i.push(t)}),oe.each(r,function(t){i.push(t)});for(var o=0;o<i.length;o++){var a=i[o].innerHTML.match(/\[['"]\s*_setPageId\s*['"]\s*,\s*(\d+)\s*\]/);if(a){t=a[1];break}}}}catch(t){}return function(){return t}}();function Ro(t){var n=this;n.s=t;var e=void 0,r=wr.get(Ft)||{s:t,d:n.d};r.s!==t?(wr.del(Ft),e=n.d=[]):e=n.d=r.d||[],n.l=e&&e.length||0}var Po=null;function Lo(){return Po}function Bo(t){return Me&&ne.isFunc(Me.getItem)?Me.getItem(t):se.get(t)}function Vo(t,n){return Me&&ne.isFunc(Me.setItem)?Me.setItem(t,n):se.top(t,n,lt)}function Jo(t){Vo(bt,t)}function Uo(){var t=Bo(bt);return t||""}function Qo(t){Vo(yt,t)}function Ko(){var t=Bo(yt);return t||""}var Wo="QR",Xo=20480/30,$o=2592e5,zo={},Ho=void 0,Zo=!(Ro.prototype={constructor:Ro,set:function(t,n,e){var r=this,i=r.l,o=r.d,a=r.indexOf(t),u={scid:0<i?o[i-1].scid+1:0,cid:t,bid:n,sf:e};-1<a?o.splice(a,i-a,u):o.push(u),r.l=o.length,wr.set(Ft,{s:r.s,d:o})},indexOf:function(t){for(var n=this.d||[],e=0,r=n.length;e<r;e++){if(n[e].cid===t)return e}return-1},toJSON:function(){var t=this.d;return t&&t.length?t:null}}),Go=[],Yo=!1,ta=["ua"].join("|")+"|",na=["lxcuid","category","sdk_ver","utm","uuid","msid","ct","appnm"],ea=["utm","seq","tm","nm","val_ref","lng","val_lab","req_id","lat","s_from","val_cid","val_bid"];function ra(){if(!Zo){var t=Gn(),n=[Ho.opts.cid],e=0,r=function(t,n){if(!t)try{var e=n;if(ne.isObj(n)||(e=JSON.parse(n)),0===e.code)(function t(n){var e=0,r=0;var i=[];var o=Gn()-$o;for(var a in n)e+=n[a].bids.length,r+=n[a].bids.length;if(!r)return;for(var u in zo)e+=zo[u].bids.length,zo[u].tm<o&&i.push(u);Xo<e&&(i.length?(oe.each(i,function(t){delete zo[t]}),t(n)):zo={});zo=ne.extend(zo,n);setTimeout(function(){wr.set(Wo,zo)},10)})(function(t){if(!ne.isObj(t))return;var i={},o=Gn();return oe.each(t,function(n,r){i[r]=i[r]||{cid:r,tm:o,bids:[],envInfo:(n.envInfo||{}).quickReport||[],evsInfo:(n.evsInfo||{}).quickReport||[]},delete n.envInfo,delete n.evsInfo;var t=function(e){var t=n[e].quickReport||[];oe.each(t,function(t){var n={tp:e,id:t};i[r].bids.push(n)})};for(var e in n)t(e)}),i}(e.data)),Zo=!0;else{if(304!==e.code)return void e.message;Zo=!0}}catch(t){}};for(var i in zo)e++,t=Math.min(zo[i].tm,t);0===e&&(t=0);var o=("https://ocean.sankuai.com/delivery/api/web-configFile?\n                timestamp="+t+"\n                &cidList="+n.join(",")+"\n                &rnd="+Math.random()).replace(/\s/g,"");"https"===Se()&&Oi(o,{},{cb:r})||function(t,n,e,r){var i=void 0,o=(r=r||{}).outTime||5e3,a="__lxsdk_jsonp_callback_"+Math.random().toString(16).slice(2,10);/^([^?]+)\?/.test(t)?t=t.replace(/^([^?]+)\?/,"$1?"+n+"="+a+"&"):/^([^#]+)#/.test(t)?t=t.replace(/^([^#]+)#/,"$1?"+n+"="+a+"#"):t+="?"+n+"="+a;var u=Rn.createElement("script");u.src=t,Tn[a]=function(t){clearTimeout(i);try{e(Vn,t)}catch(t){}delete window[a]},u.type="application/javascript",u.charset="utf-8",u.setAttribute("async","true"),Rn.body.appendChild(u),i=D(function(){try{e("timeout")}catch(t){}delete window[a]},o),D(function(){Rn.body.removeChild(u)},0)}(o,"callback",r)}}function ia(t,n,e){if(!rn.useQR)return!1;if(!zo[n])return!1;for(var r=zo[n].bids,i=0,o=r.length;i<o;i++){var a=r[i];if(a.tp==t){if(t===L&&a.id==n)return!0;if(a.id==e)return!0}}return!1}function oa(t,n,e){var r={},i={};if(t&&zo[t]){var o=na.concat(zo[t].envInfo||[]),a=ea.concat(zo[t].evsInfo||[]);oe.each(o,function(t){n.hasOwnProperty(t)&&n[t]&&(i[t]=n[t])}),oe.each(a,function(t){e.hasOwnProperty(t)&&ta.indexOf(t+"|")<0&&(r["evs."+t]=e[t])});var u=ne.extend(!0,i,r);Go.push(u),f(Yo),Yo=setTimeout(function(){Oi("https://"+Ut+"/?rnd="+Math.random(),Go,{nm:e.nm,cb:Kt}),Go=[]},0)}}!function(){var t=wr.get(Wo);if(t)try{var n=void 0;n=ne.isObj(t)?t:JSON.parse(t),zo=ne.extend(!0,zo,n)}catch(t){}}(),function n(){var e=pu();return new Ar(function(t){e?t(e):setTimeout(function(){n().then(t)},100)})}().then(function(t){Ho=t,rn.useQR&&(Se(),ra())});var aa="category",ua="setEvs",ca=5e3,sa={overlen_cutoff:1},fa={code:200,status:200,type:"native-report"},da={code:Qt,status:200,type:"native-report"},la="val_bid",va="page",pa="s_from",ha="lat",ma="lng",ga=[],_a=Rn.referrer,ya=[],ba=void 0,wa=void 0,xa={},Sa=0,ka=0,Oa=function(t,n,e){if(e){var r={},i={custom:r};r[n]=e,t=ne.extend(!0,t||{},i)}return t},qa=function(t,n){var e,r,i=(e=t,r="fn_"+parseInt(1e6*Yn()),Te[r]=e,r);return D(function(){Fe(i,{code:-1,status:408,type:"overtime"})},te(n)&&n||2e3),i};function Ia(t,n){var e=this;e.env=n||{},e.currentEvs={},e.opts=ne.extend(!0,{},t),ga.push(e),An=e}var ja=Ia.prototype;function Aa(t){return 6===t._ptpvs}function Da(){return!Sa}function Ea(t){return(t=t||{})&&!ne.isObj(t)&&(t={cid:""+t}),t}function Ca(e,r,i,o,a){var u=this,c=qa((a=a||{}).callback,a.callbackTimeout),t=a,n=t.isLeave,s=t.currentPageInfo,f=t.mvDelay,d=t.sf,l=ne.isStr(a.category),v=ia(e,r,i);if(wn()===at){var p=La(u),h=Ka(qr.getAll()),m=Ja(e,r,i,o,null,a),g=m.body,_=m.ev,y=Wa(p,g,h,a);if(v&&oa(r,p,_),e===U){if(f&&!l)return ne.run(g,function(t){t.lx_inner_data&&(t.lx_inner_data.md=f),ya.push(t)}),void D(function(){if(ya.length){var t=Wa(p,ya,h,a);u.send(t,{cbkey:c}),ya=[]}},f*it)}else{if(e===Q)return void Dn.call(u,Q,p,g[0],{tag:h});if(e===V){if(s&&function(t,n){ne.isObj(t[Mt])||(t[Mt]={});t[Mt][va]=n}(_,u._cpi),y=Wa(p,g,h,a),n){var b=be(),w=Va(B,r,Vn,b);y.evs.push(w),Jo(r),Qo(ba)}Ve&&d&&Lo().set(r,i,d)}}u.send(y,{nm:e,cbkey:c})}else{var x=u.env,S=void 0,k=Ba({isQuickReport:v}),O=[Qa.call(u,e,r,i,o)];if(e===V&&(S={sf:d},u._cpi&&(S.cpi=u._cpi),O=[Qa.call(u,e,r,i,o,null,S)],n)){var q=be(),I=Qa.call(u,B,r,null,q);O.push(I),Jo(r),Qo(ba)}x[A]&&(O=function(t,n){if(!oe.isArray(t)||!t.length)return t;if(!ne.isObj(t[0][Mt]))return t[0][Mt]={page:{utm:n[A]}},t;if(!ne.isObj(t[0][Mt][va]))return t[0][Mt][va]={utm:n[A]},t;return t[0][Mt][va]=ne.extend(!0,t[0][Mt][va],{utm:n[A]}),t}(O,x));var j=ne.isStr(a.category)&&a.category||x[aa];new Date;Hi(Pa(j),ua,O,function(t,n){t?(xn(at),M(t),new Date,Fe(c,da),Ca.call(u,e,r,i,o,a)):(Fe(c,fa),new Date)},{nativeOptions:k})}}function Ma(){return ba||(ba=Ta()),ba}function Na(t){var n=wr.get(v);return n&&t&&wr.del(v),n}function Ta(){return ne.now().toString(16)+"-"+Math.floor(65535*ne.rnd())+"-"+Math.floor(65535*ne.rnd())}function Fa(t){var n,e,r=t.nm;L===r?(t.nm="mpt",t.val_act="pageview"):B===r?(t.nm="report",t.val_act="quit"):(t.nm="mge",t.event_type=(n=r,(e={})[W]="order",e[X]="pay",e[V]="click",e[K]="return",e[U]="view",e[J]="click",e[n]||r)),t.nt=0,t.isauto=8}function Ra(t){var n="data_sdk_";return 0!==t.indexOf(n)&&(t=n+t),t}function Pa(t){var n="data_sdk_";return 0===t.indexOf(n)&&(t=t.replace(n,"")),t}function La(t){var n=ne.extend(!0,{},t.env);n[aa]=Ra(n[aa]);var e=po();e||vo(e=Ti(),n.uid||""),rn.inWXMP&&ne.isObj(n[l])&&ne.isObj(t.env[l])?n[l][b]=t.env[l][b]=e:n[b]=t.env[b]=e;var r=n.utm,i={ua:Re,sdk_ver:g,ch:r&&r.utm_source?r.utm_source:"web",sc:ze};i[At]=g,rn.debug&&(i._misid=rn.debug);var o=ne.extend(!0,i,n);return Je&&!yn()&&delete o.ch,o}function Ba(t){return(t=t||{}).isQuickReport=un("QR")&&!!t.isQuickReport,t}function Va(t,n,e,r,i,o){i=i||C,o=o||{};var a,u,c,s=bo(),f=xo(),d=ne.isObj(r)&&r.custom||{},l=void 0,v=L===t,p=W===t,h=X===t,m={nm:t,tm:ne.now(),nt:rn.nt,isauto:i,val_cid:n,req_id:Ma(),seq:s,lx_inner_data:ne.extend(!0,{},fn())};if(v){var g=Fn.href;m.url=g,(l=_a)&&(m.refer_url=l),i===C&&(_a=g)}(p||v||h)&&Ve&&(a=m,(u=Lo().toJSON())&&(a[pa]=u),m=a),r=Oa(r,"_hguid",To()),(c=r)&&c.custom&&"v3"===c.custom._api&&!n&&(m.val_cid=Rn.title||Fn.pathname,r=Oa(r,"_cid",1)),ne.isObj(d)&&"v3"===d._api&&(m.lx_inner_data._api="v3",delete d._api),Ve&&o.sf&&(m.lx_inner_data.use_sfrom=1);try{m.lx_inner_data.ht=yn()}catch(t){}return v&&(r=Oa(r,"_hpid",Fo()),r=Oa(r,"_lx_cv","prod"),r=Oa(r,"_lx_tid",function(){var t={mem:Ei,cookie:se.get(Di),ls:wr.get(Di),ss:Me&&Me.getItem(Di)},n=void 0;for(var e in t)t[e]&&(n=t[e]);for(var r in n||(n=Ci(!0)),t)if(!t[r])switch(r){case"mem":Ei=n;break;case"cookie":se.top(Di,n,dt);break;case"ls":try{wr.set(Di,n)}catch(t){wi(location.href,"",n,t.stack||t.message,!0)}break;case"ss":try{Me&&Me.setItem(Di,n)}catch(t){wi(location.href,"",n,t.stack||t.message,!0)}}return n}()),rn.wx_t&&(r=Oa(r,"_wx_t",rn.wx_t))),e&&(m[la]=e),f&&(m[ha]=f.lat,m[ma]=f.lng),r&&(JSON.stringify(r).length>=ca&&(r=sa),(m[Mt]=r).lat&&r.lng&&(m[ha]=r.lat,m[ma]=r.lng)),m}function Ja(t,n,e,r,i,o){var a=Va(t,n,e,r,i,o);return{body:function(t){{if(ya&&0<ya.length){var n=ya;return ya=[],n.push(t),n}return[t]}}(a),ev:a}}function Ua(t){return Ue?t:Le&&!Ui?t:Kn(t)}function Qa(t,n,e,r,i,o){i=i||C;var a=(o=o||{}).fromWA,u=this.env.appnm,c=xo(),s=!Sn,f=void 0,d={nm:t,tm:ne.now(),nt:ot,isauto:i,val_cid:n,shouldCover:s,lx_inner_data:ne.extend(!0,{},fn())};d=ne.extend(!0,d,xa),wa&&(d.req_id=wa),o.sf&&(d.lx_inner_data.use_sfrom=1,d._sf=o.sf);var l=void 0,v=ne.extend(!0,{},r||{}),p=L===t;if(p){var h=Ua(Fn.href);l={ua:Re,url:h,_fromWA:!!a};var m=fr();m&&m.utm_source&&(l.utm=m),(f=_a)&&(l.refer_url=Ua(f)),i===C&&(_a=h)}else l={};return d=ne.extend(d,{web_cid:n,web_req_id:Ma(),web_refer_cid:Uo(),web_refer_req_id:Ko(),web_first_pv:!!(ka<=1&&Tn.history&&1===Tn.history.length)}),oe.each({web_req_id:Ma(),web_sdk_ver:g,lxcuid:Mi(),web_appnm:u},function(t,n){ne.isStr(t)&&(l[n]=t)}),ne.isObj(v.custom)&&"v3"===v.custom._api&&(l.web_appnm=function(t){if(ne.isStr(t))return t&&nn[t]||nn}("appnm"),d.lx_inner_data._api="v3",delete v.custom._api),o.cpi&&!v.page&&(v.page=o.cpi),v.custom=ne.extend(!0,v.custom,l),v=Oa(v,"_hguid",To()),p&&(v=Oa(v,"_hpid",Fo())),t!==J||Ji?Zi()||Fa(d):Zi()?d.nm=V:Fa(d),c&&(d[ha]=c.lat,d[ma]=c.lng),e&&(d[la]=e),v&&JSON.stringify(v).length>=ca&&(v=sa),d[Mt]=v,p&&!Zi()&&(d.val_val=v,delete d[Mt]),d}function Ka(t){return t}function Wa(t,n,e,r){var i=(r=r||{}).category;return oe.isArrayLike(n)||(n=[n]),ne.run(n,function(t){t&&e&&(t.tag=e)}),t.evs=n,ne.isStr(i)&&(t[aa]=Ra(i)),t}function Xa(t,n){var e={};return e[rt]=n,ne.extend(e,t)}function $a(e,t,n,r){var i,o,a,u,c=(i=t,o=n,a=r,u=null,!ne.isStr(i)||o||a?ne.isObj(i)&&ne.isStr(o)&&!a&&(u=o,o=null):(u=i,i=null),u&&(a=ne.extend({cid:u},a||{})),{lab:i,env:o,opts:a}),s=c.lab,f=c.env;r=Ea(c.opts);var d=e.opts.cid=r.cid||e.opts.cid;r=ne.extend({cid:d},r),f&&ne.isObj(f)&&oe.each(f,function(t,n){e._dt.set(n,t,Vn,!0)}),e._dt.pageView(s,r)}function za(t,n){this.env=t||{},this.opts=n||{},this._t=[]}ja.set=function(t,n,e,r){var i=this,o=i.env,a=rn.inWXMP&&ne.isObj(o[l]);if(ne.isObj(t))ue(t,function(t,n){i.set(n,t)});else if(t!==aa||n)if(!r&&a&&o[l][t]?o[l][t]=n:o[t]=n,"utm"===t&&ne.isObj(n)&&!a&&sr(n),dn(t,n),O===t&&Ee(n),ot!==wn()||Pt[t])ne.isFunc(e)&&e(o,i);else{var u={},c=Pa(o[aa]);u[t]=n,Hi(c,"setEnv",u,function(){ne.isFunc(e)&&e(o,i)})}},ja.get=function(t,n){ne.isFunc(n)&&n(this.env[t],this)},ja.pageView=function(e,r){r=Ea(r)||{};var t=void 0,i=this,n=r.fromWA,o=r.withlab,a=qa(r.callback,r.callbackTimeout),u=i.opts.cid,c=r.cid||u,s=r.isauto||C,f=r.isAutoInit,d=r.reportStatus,l=u&&!(Aa(i)||f)&&!Da(),v=d===at||at===wn(),p=i.env;if(n&&o?(s=6,e=this._cpi||{}):this._cpi=e,l&&!vn()){var h=be();t=v?Va(B,u,null,h):Qa.call(i,B,u,null,h),Jo(c),Qo(ba)}ln(0),u&&(Aa(i)||Da())||(ba=Ta()),i.opts.cid=c;var m=ia(L,c);if(v){var g=La(i),_=Ka(qr.getAll()),y=Ja(L,c,null,e,s),b=y.body;l&&t&&b.unshift(t);var w=Wa(g,b,_,r);m&&oa(c,g,y.ev),this.send(w,{nm:L,cbkey:a}),ka++,f||Sa++}else{var x=Ba({isQuickReport:m,shouldCoverCid:!0,needCachePD:!0}),S=[Qa.call(i,L,c,null,e,s,{fromWA:n})];l&&t&&S.push(t),Hi(Pa(ne.isStr(r.category)&&r.category||p[aa]),ua,S,function(t,n){t?(xn(at),Fe(a,da),i.pageView(e,r),wi(Fn.href,"native-report-error",i.env.union_id,M(t))):(ka++,f||Sa++,Fe(a,fa))},{nativeOptions:x})}i.currentEvs={cid:c,req_id:Ma(),refer_cid:Uo(),refer_req_id:Ko()},i._ptpvs=f?6:C,ye()},ja.pageDisappear=function(e,r){r=ne.extend({},r);var i=this,t=r.cid||i.opts.cid,n=r.shouldStore;ln(d);var o=be();if(e=ne.extend(o,e),Jo(t),Qo(ba),at===wn()||n){var a=Wa(La(i),Va(B,t,null,e,r.isAuto),Ka(qr.getAll()),r);if(Ve&&n&&wr.nt){De()&&(rn.inWXMP&&ne.isObj(a[l])&&a[l][O]?a[l][O]=Ce():a[O]=Ce());var u=Na()||[];oe.isArray(u)?wr.set(v,u.concat(a)):wr.set(v,[a])}else i.send(a)}else{var c=this.env,s=Ba(),f=[Qa.call(i,B,t,null,e)];Hi(Pa(ne.isStr(r.category)&&r.category||c[aa]),ua,f,function(t,n){t&&(xn(at),i.pageDisappear(e,r))},{nativeOptions:s})}Mn()},ja.systemCheck=function(e,r,i){i=ne.extend({},i);var o=this,t=i.cid||o.opts.cid,n=!!i.isLXLog;if(at===wn()){var a=La(o),u=Wa(a,Ja(J,t,e,r).body,Ka(qr.getAll()),i);n&&(a.category="others"),this.send(u)}else{var c=o.env,s=Ba(),f=[Qa.call(o,J,t,e,r)],d=ne.isStr(i.category)&&i.category||c[aa];n&&(d="others"),Hi(Pa(d),ua,f,function(t,n){t&&(xn(at),o.systemCheck(e,r,i))},{nativeOptions:s})}},ja.moduleView=function(t,n,e){var r=(e=ne.extend({},e)).cid||this.opts.cid;e.mvDelay=this.opts.mvDelay||e.delay,Ca.call(this,U,r,t,n,e)},ja.moduleViewList=function(t,n,e){var r=(e=ne.extend({},e)).cid||this.opts.cid;e.mvDelay=this.opts.mvDelay||e.delay;var i=un("MVL");wn()!==ot||i?Ca.call(this,Q,r,t,n,e):Ca.call(this,U,r,t,n,e)},ja.moduleClick=function(t,n,e){var r=(e=ne.extend({},e)).cid||this.opts.cid;e&&e.isLeave&&ln(d),e.currentPageInfo=e.withPageInfo&&ne.isObj(this._cpi)?this._cpi:Vn,Ca.call(this,V,r,t,n,e)},ja.moduleEdit=function(t,n,e){var r=(e=ne.extend({},e)).cid||this.opts.cid;Ca.call(this,K,r,t,n,e)},ja.order=function(e,r,i){i=ne.extend({},i);var o=this,a=qa(i.callback,i.callbackTimeout),t=i.cid||o.opts.cid;we(0,r);var n=ia(W,t,e);if(at===wn()){var u=La(this),c=Ja(W,t,e,r),s=c.body,f=Ka(qr.getAll()),d=Wa(u,s,f,i);n&&oa(t,u,c.ev),this.send(d,{cbkey:a})}else{var l=this.env,v=Ba({isQuickReport:n}),p=[Qa.call(o,W,t,e,r)];Hi(Pa(ne.isStr(i.category)&&i.category||l[aa]),ua,p,function(t,n){t?(xn(at),Fe(a,da),o.order(e,r,i)):Fe(a,fa)},{nativeOptions:v})}},ja.pay=function(e,r,i){i=ne.extend({},i);var o=this,a=qa(i.callback,i.callbackTimeout),t=i.cid||o.opts.cid;we(0,r);var n=ia(X,t,e);if(at===wn()){var u=La(o),c=Ja(X,t,e,r),s=c.body,f=Ka(qr.getAll()),d=Wa(u,s,f,i);n&&oa(t,u,c.ev),this.send(d,{cb:function(t,n,e){qr.clear(),Fe(a,{code:t,status:n,type:e})}}),o.clearTag()}else{var l=this.env,v=Ba({isQuickReport:n}),p=[Qa.call(o,X,t,e,r)];Hi(Pa(ne.isStr(i.category)&&i.category||l[aa]),ua,p,function(t,n){t?(xn(at),Fe(a,da),o.pay(e,r,i)):Fe(a,fa)},{nativeOptions:v})}},ja.tag=function(e,t,n,i){var r=void 0,o=this.env,a=arguments,u=[],c=function(t){if(!ne.isObj(t))return t;for(var n=t,e=0,r=u.length;e<r;e++){if(!n)return n;n=n[u[e]]}return n},s=function(){oe.each(a,function(t){if(!ne.isStr(t))return!1;u.push(t)})},f=function(t,n,e){var r={};r[t]=n,Hi(Pa(o[aa]),"setTag",r,function(t,n){i&&(e&&s(),i(t,c(n),!0))})},d=function(t){var n=qr.getAll();t||s(),i&&i(0,c(n),!1)};if(oe.each(a,function(t){ne.isFunc(t)&&(i=t)}),ne.isObj(e)){var l=this;oe.each(e,function(t,n){l.tag(n,t)})}else ne.isStr(e)&&ne.isObj(t)?at!==wn()?f(e,r=t,!0):(ue(t,function(t,n){qr.set(e,n,t)}),d(!0)):(ne.isObj(n)||ne.isStr(n))&&function(t){if(!ne.isStr(t)&&!t.length)return!1;return!0}(e)&&ne.isStr(t)?at!==wn()?((r={})[t]=n,f(e,r,!0)):(qr.set(e,t,n),d(!0)):ne.isFunc(e)||ne.isFunc(t)||ne.isStr(e)&&ne.isStr(t)&&ne.isFunc(n)?at!==wn()?(s(),Hi(Pa(o[aa]),"getTag",{},function(t,n){i&&i(t,c(n),!0)})):d():i&&i(-1)},ja.clearTag=function(t,n,e){var r=0;at===wn()?(ne.isFunc(t)&&(e=t,t=Vn),qr.clear(t,n),e&&e(0)):r=-1,e&&e(r)},ja.sfrom=function(r){var i=void 0,t=this.env;at!==wn()?Hi(Pa(t[aa]),"getSFrom",{},function(t,n){if(n){var e=n.data?n.data:n;i=ne.isStr(e)?JSON.parse(e):e,r(t,i)}}):r(1,[])},ja.send=function(t,r){var n=[];r=ne.extend({cb:function(t,n,e){r.cbkey&&Fe(r.cbkey,{code:t,status:n,type:e})}},r),ne.run(t,function(t){De()&&(rn.inWXMP&&ne.isObj(t[l])&&t[l][O]?t[l][O]=Ce():t[O]=Ce()),n.push(t)});var e=Na(!0);e&&oe.isArray(e)&&(n=e.concat(n)),xi(n,r)},ja.getAll=function(){return ga};var Ha=za.prototype;Ha.create=function(t,n){var e=ne.extend({},this.env);e=ne.extend(e,{category:t});var r=ne.extend({isDefault:!1},this.opts),i=new Ia(r=ne.extend(r,n||{}),e);return this._t.push(i),n.isDefault&&(this._dt=i),i},Ha.config=function(t,n){return Vn!==t&&(rn[t]=n),"cid"===t&&ie(n)&&(this.opts.cid=n),rn[t]},Ha._initPV=function(t,n){$a(this,this.config("pageValLab"),t=ne.extend(t,this.config("pageEnv")),{isauto:6,cid:n,isAutoInit:!0})},Ha.pageView=function(t,n,e){$a(this,t,n,e)},Ha.moduleView=function(t,n,e){this._dt.moduleView(t,n,e)},Ha.moduleViewList=function(t,n,e){this._dt.moduleViewList(t,n,e)},Ha.systemCheck=function(t,n,e){this._dt.systemCheck(t,n,e)},Ha.moduleClick=function(t,n,e){this._dt.moduleClick(t,n,e)},Ha.moduleEdit=function(t,n,e){this._dt.moduleEdit(t,n,e)},Ha.order=function(t,n,e,r){this._dt.order(t,Xa(e,n),r)},Ha.pay=function(t,n,e,r){this._dt.pay(t,Xa(e,n),r)},Ha.pageDisappear=function(t,n){this._dt.pageDisappear(t,n)},Ha.tag=function(t,n,e,r){this._dt.tag(t,n,e,r)},Ha.sfrom=function(t){this._dt.sfrom(t)},Ha.clearTag=function(t,n,e){this._dt.clearTag(t,n,e)},Ha.getAll=function(t){t&&t(this._t)},Ha.getTracker=function(n,t){var e=oe.find(this._t,function(t){return t.env.category===n});t&&t(e)},Ha.get=function(t,n){this._dt.get(t,n)},Ha.set=function(t,n,e){this._dt.set(t,n,e)},Ha._setRequestID=function(t){wa=t},Ha._setNativeEvsData=function(t,n){var e;e=n,xa[t]=e};var Za=void 0,Ga=!0,Ya=function(){var t;if(!!!rn.onWebviewAppearAutoPV)return t=rn.c,void pu().getTracker(t,function(t){var n=t.env.category,e=ne.extend({refer_cid:Uo(),refer_req_id:Ko()},t.currentEvs);oe.each(e,function(t,n){e["web_"+n]=t,delete e[n]}),Hi(n,"setWebPageData",e,function(t,n){})});ye(),hu(),Za.pageView(Vn,Vn,{fromWA:!0,withlab:!!rn.positiveLab}),ln(0)},tu=function(){!!rn.onWebviewAppearAutoPV&&(vn()||(ln(d),Za.pageDisappear({})))},nu=function(){Ga=!0,Ya()},eu=function(){Ga=!1,tu(),Mn()},ru=function(){Ga&&Ya()},iu=function(){Ga&&(tu(),Mn())},ou=void 0,au=!!/\d\.\d\.\d/.test(He)&&0<=Oe(He,"11.3.0");function uu(t,n){ne.isStr(t)&&(n=ne.isFunc(n)&&n||function(){},"on"+t in Tn||"KNB:"+t in Tn?ne.on(window,t,function(t){n(t)}):(ou=window.KNB)&&ne.isFunc(ou.subscribe)&&ou.subscribe({action:t,handle:function(){n()},success:function(){},fail:function(t){}}))}var cu={hook:function(){try{uu("appear",nu),uu("disappear",eu),au&&(uu("foreground",ru),uu("background",iu))}catch(t){wi("sdk","api-error","",t.stack,!0)}Za=pu()}},su=[],fu=ut,du=void 0,lu=void 0;function vu(t,n){return{cb:t,cmd:n}}function pu(){return du}function hu(){var n,r;kn(!1),(n=lu,r={none:!0},new Ar(function(e){try{var t=Oe(eo,"4.12.0");!eo||!te(t)||t<0?e(r):n&&Be||tr()?Hi(n,"getReqId",{},function(t,n){e(t?r:n)}):e(r)}catch(t){e(r),wi("sdk","api-error","",t.stack,!0)}})).then(function(t){var n=t||{},e=n.val_ref,r=n.req_id,i=n.refer_req_id,o=!!(r||e||i);r&&du._setRequestID(r),e&&du._setNativeEvsData("val_ref",e),i&&du._setNativeEvsData("refer_req_id",i),kn(o)})}function mu(t,n){if(st===fu)t&&t(du);else if(ct===fu)t&&su.push(vu(t,n));else{ne.now();su=su.concat(vu(t,n));var e=Rn.getElementsByTagName("meta"),o=he(e,"lx:cid")||rn.cid;if(!(lu=rn.c=he(e,"lx:category")))return void(fu=ut);fu=ct;var a=he(e,"lx:mvDelay");a=isNaN(a)?0:parseInt(a,10);var u="off"!==he(e,"lx:autopv");rn.autoPV=u,D(hu,1e3),Ar.all([jo(lu)]).then(function(t){var n,r=t[0],e=r.appnm;!ne.isStr(e)||Rn.domain,du=new za(r,{cid:o,isDefault:!0,mvDelay:a}),lu&&du.create(lu,{isDefault:!0}),r=ne.extend(!0,du._dt.env,r),du._dt.env=r,ne.now();try{var i=[];oe.each(su,function(t){var n=t.cb,e=t.cmd;"config"===e||"set"===e?n(du,r):i.push(t)}),Ve&&(n=r.msid,Po||(Po=new Ro(n))),u&&lu&&o&&o&&du._initPV(r,o),cu.hook(function(){}),oe.each(i,function(t){t&&t.cb&&t.cb(du,r)})}catch(t){}}).then(function(){fu=st,ci.check()},function(t){throw fu=st,t})}}var gu=[["click",nt],["tap",nt],["view","moduleView"],["return","moduleEdit"],["order",et],["pay","pay"]],_u=oe.reduce(gu,function(t,n){return t[n[0]]=n[1],t},{}),yu=[["mpt",Y],["report","pageDisappear"]],bu=oe.reduce(yu,function(t,n){return t[n[0]]=n[1],t},{}),wu=oe.reduce(["config","event","send","use"],function(t,n){return t[n]=!0,t},{}),xu=function(t,n){var e=Rn.getElementsByTagName("head")[0],r=Rn.createElement("meta");r.setAttribute("name",t),r.setAttribute("content",n),e.appendChild(r)},Su=function(e,t){return e=e||{},ue(t,function(t,n){1==={act:1,cid:1,val:1,lab:1,bid:1}[n]?e["val_"+n]=t:e[n]=t}),e},ku=function(t,n,e){(t&&!re(t)&&(t={custom:{_lab:t}}),!t&&e&&(t={}),e)&&((t.custom=t.custom||{})[n]=e);return t},Ou=function(t,n,e){return t&&!re(t)&&(t={custom:{_lab:t}}),t&&(t[n]=e),t},qu=function(t,n){var e=t[Mt],r=t[Tt];if(e&&e===r&&(r=ee(!0,{},r)),n&&(r||e)){var i=e;e=r||{},i&&(e=ku(e||{},"_lab",i))}else if(!n&&(r||e)){if(ie(r)&&(r={analyse_val:r}),ie(e))e={val_lab:e};r&&(e=Ou(e||{},"page",r))}return Vn!==t[z]&&(e=ku(e||{},"_act",t[z])),Vn!==t[$]&&(e=ku(e||{},"_et",t[$])),Vn!==t[Z]&&(e=Ou(e||{},Z,t[Z])),Vn!==t[G]&&(e=ku(e||{},"_el_id",t[G])),e};function Iu(t){var n,e,r,i=(e=(n=t).split("."),r=void 0,2===e.length&&(n=e[1],r=e[0]),[n,r]),o=void 0;return i[1]&&(o=i[1]),[t=i[0],o]}var ju=function n(e,t){var r=Iu(e);e=r[0];var i=r[1],o=t[0],a=t[1];if(oe.isArray(o))return ce(o,function(t){return n(i?i+"."+e:e,[t,a])});var u,c,s=(o.nm||"mge").toLowerCase();o.nm=s,(c=(u=o).val)&&(Su(u,c),delete u.val),o=u;var f="mge"===s;if("mpt"===s)return function(t){t=Su(t,t.val);var n=qu(t,!0);return[Y,n,null,t[H]]}.apply(null,t);var d,l,v=et===s,p="pay"===s,h=o[$],m=o[z],g=qu(o,!1);v||p||h||!f||!m?p||v?e=s:(l=h,e="mge"===(d=s)?l?_u[l]||tt:nt:"mpt"===d||"report"===d?bu[d]:tt,f||(g=ku(g||{},"_nm",s))):e=nt;var _=o[H];return _&&((a=a||{}).cid=_),i&&ku(g,"_logchannel",i),ku(g=g||{},"_api","v3"),e===et||"pay"===e?[e,o[Nt],g.order_id,g,a]:[e,o[Nt],g,a]},Au=function t(){if(!t.f){xu("lx:autopv","off"),t.f=!0}},Du=function(t){if(!t||!t.length)return t;try{var n=t[0];0<(a=(o=n).indexOf("."))&&(o=o.substr(a+1)),wu[o]&&(t=oe.slice(t,1),Eu(n)?(Ae(3),Au(),t=ju(n,t)):Cu(n)?(Ae(3),Au(),t=function(t,n){var e=Iu(t)[1];t=Y;var r=n[1],i=n[2],o=e?{custom:{_logchannel:e}}:Vn,a={};if(ie(r))re(i)?o=i:ie(i)&&(o=ku({},"analyse_val",i));else if(re(r)){i=(a=Su(a,r))[Tt],ie(i)&&(i=ku({},"analyse_val",i)),o=i;var u=a[Mt];u&&ku(o,"_lab",u),r=a[H]}var c=void 0;return r&&((c={}).cid=r),[t,o=ku(o,"_api","v3"),Vn,c]}(n,t)):Mu(n)?(Ae(3),Au(),t=function(t,n){var e=n[0],r=n[1];if(e&&(e=e.replace(/^data_sdk_/i,""),xu("lx:category",e)),re(r))return["set",r]}(0,t)):Nu(n,t[0],t[1])?(Au(),e=n,r=t[0],i=t[1],t="appnm"===r&&ie(i)?void xu("lx:appnm",i):("cid"===r&&ie(i)&&xu("lx:cid",i),[e,r,i])):t.unshift(n))}catch(t){}var e,r,i,o,a;return t},Eu=function(t){var n=t.indexOf(".");return 0<n&&(t=t.substr(n+1)),"event"===t},Cu=function(t){var n=t.indexOf(".");return 0<n&&(t=t.substr(n+1)),"send"===t},Mu=function(t){return"use"===t},Nu=function(t,n){var e=!1;return"cid"!==n&&"appnm"!==n||(Ae(3),e=!0),"config"===t&&e},Tu=void 0,Fu=void 0;function Ru(t,n,e,r,i){if(ne.isFunc(n))n.call(t,t,r,i);else if(!i&&ne.isStr(n)){if(ne.isFunc(t[n]))return t[n].apply(t,e);if("onLoad"===n)try{e[0](ne.extend(!0,{},r))}catch(t){}}}function Pu(){if(!Fu){Fu=!0;var r=void 0;Ke&&ne.on(Rn,"mouseup",function(t){var n=t.target||t.srcElement,e=n.tagName+n.href;e=e.toLocaleLowerCase(),1===n.nodeType&&/^ajavascript:/i.test(e)&&(r=new Date)});var t=Tn.onbeforeunload;Ve&&Ue?Tn.addEventListener("pagehide",qe(!1,Ke,r,void 0,Lu,Vn,vn)):Tn.onbeforeunload=qe(!1,Ke,r,void 0,Lu,t,vn)}}function Lu(r){try{var t=document.getElementById("__lxsdk_devltool_message_node");if(t){var n=new CustomEvent("lxsdk",{detail:{args:JSON.stringify(arguments)}});t.dispatchEvent(n)}}catch(t){}var e=arguments;if(e.length){var i=oe.slice(e,1,e.length);try{Tu?Ru(Tu,r,i,Tu._dt?Tu._dt.env:null):mu(function(t,n,e){Ru(Tu=t,r,i,n,e),Pu()},r)}catch(t){try{wi("sdk","api-error","",t.message+"\n"+t.stack,!0)}catch(t){}}}}window._lxsdk_isDOMReady||(window._lxsdk_isDOMReady=!0,function(){var s=!0,f=!1,d=function(){var t=me();t&&(t.q.push=function n(t){try{var e,r=(e=Du(t))?e[0]:"";if(oe.isArray(r))return void ue(e,function(t){n(t)});"start"===r?(s=!0,f||l(d)):!1===s?e&&d.push(e):Lu.apply(Vn,e)}catch(t){try{wi("sdk","api-error","",t.stack,!0)}catch(t){}}});for(var n=void 0,e=void 0,r=[],i=[],o=[],a=t&&oe.isArray(t.q)?t.q:[],u=0,c=a.length;u<c;u++)"config"===(e=a[u][0])?i.push(a[u]):n||"use"!==e?o.push(a[u]):(r.push(a[u]),n=!0);return a=i.concat(r.concat(o))}();function l(t){f||(t&&oe.each(t,function(t){var n,e=(n=Du(t))?n[0]:"";oe.isArray(e)?ue(n,function(t){Lu.apply(Vn,t)}):e?Lu.apply(Vn,n):t&&t&&t[0]}),Lu(function(){Pu()}),f=!0)}if(0===d.length)mu(function(t){Tu=t,Pu()});else try{d=ce(d,function(t){var n;if("config"===((n=Du(t))?n[0]:"")){var e=n[1],r=n[2];"autoStart"===e&&!1===r&&(s=!1)}return n}),s&&l(d)}catch(t){}}())}();
